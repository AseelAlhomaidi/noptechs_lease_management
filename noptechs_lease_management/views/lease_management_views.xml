<?xml version="1.0" encoding="utf-8"?>
<odoo>


    <record id="action_company_lease" model="ir.actions.act_window">
        <field name="name">Lease Management</field>
        <field name="res_model">company.lease</field>
        <field name="view_mode">list,form</field>
    </record>


    <menuitem id="menu_lease_root" name="Leases" sequence="65" web_icon="lease_management,static/description/icon.png"/>
    <menuitem id="menu_lease_management" name="Lease Management" parent="menu_lease_root" action="action_company_lease" sequence="10"/>


    <record id="view_company_lease_list" model="ir.ui.view">
        <field name="name">company.lease.list</field>
        <field name="model">company.lease</field>
        <field name="arch" type="xml">
            <list decoration-danger="lease_status == 'expired'" decoration-warning="lease_status == 'expiring'">
                <field name="lease_status" widget="badge" decoration-danger="lease_status == 'expired'" decoration-warning="lease_status == 'expiring'" decoration-success="lease_status == 'active'"/>

                <field name="contract_number"/>
                <field name="region"/>
                <field name="unit_type"/>

                <field name="start_date" widget="date"/>
                <field name="end_date" widget="date"/>

                <field name="days_to_expiry"/>
                <field name="installments_per_year"/>

                <field name="total_rental_amount"/>
                <field name="amount_paid"/>
                <field name="remaining_balance"/>

                <field name="landlord_bank_account"/>


                <field name="notes" optional="show"/>
            </list>
        </field>
    </record>


    <record id="view_company_lease_form" model="ir.ui.view">
        <field name="name">company.lease.form</field>
        <field name="model">company.lease</field>
        <field name="arch" type="xml">
            <form>
                <sheet>

                    <div class="oe_title">
                        <h1>
                            <field name="contract_number" placeholder="Contract Number"/>
                        </h1>
                    </div>

                    <group>
                        <group string="Location">
                            <field name="region"/>
                            <field name="unit_type"/>
                            <field name="partner_id"/>
                            <field name="establishment_representative"/>
                        </group>

                        <group string="Contract Details">
                            <field name="start_date"/>
                            <field name="end_date"/>
                            <field name="days_to_expiry" readonly="1"/>
                            <field name="lease_status" widget="badge" decoration-danger="lease_status == 'expired'" decoration-warning="lease_status == 'expiring'" decoration-success="lease_status == 'active'" readonly="1"/>
                        </group>
                    </group>

                    <group string="Payment Terms">
                        <field name="installments_per_year"/>
                    </group>

                    <group string="Financials">
                        <group>
                            <field name="currency_id"/>
                            <field name="total_rental_amount"/>
                        </group>
                        <group>
                            <field name="amount_paid" readonly="1"/>
                            <field name="remaining_balance" readonly="1"/>
                        </group>
                    </group>

                    <group string="Banking">
                        <field name="landlord_bank_account"/>
                    </group>

                    <notebook>
                        <page string="Payments">
                            <field name="payment_line_ids">
                                <list editable="bottom">
                                    <field name="payment_date"/>
                                    <field name="installment_number"/>
                                    <field name="amount"/>
                                    <!-- <field name="paid_by" readonly="1"/> -->
                                    <!-- <field name="reference"/> -->
                                    <field name="note"/>
                                    <field name="receipt_attachment_ids" widget="many2many_binary"/>
                                </list>
                            </field>
                        </page>

                        <page string="Notes">
                            <group>
                                <field name="notes" placeholder="VAT details and general remarks..."/>
                            </group>
                        </page>
                    </notebook>

                </sheet>
                <chatter/>
            </form>
        </field>
    </record>

</odoo> 
